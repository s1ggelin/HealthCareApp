@page
@model HealthCareWebb.Pages.Dashboard.AdminDashboardModel
@{
    ViewData["Title"] = "Admin Dashboard";

    @using System.Globalization

    // Start with todays date
    var startDate = DateTime.Today;
    var daysOfWeek = new List<DateTime>();


    // Loop until we have five weekdays  
    while (daysOfWeek.Count < 5)
    {
        // Only add day if it is a weekday
        if (startDate.DayOfWeek != DayOfWeek.Saturday && startDate.DayOfWeek != DayOfWeek.Sunday)
        {
            daysOfWeek.Add(startDate);
        }
        // move to the next day
        startDate = startDate.AddDays(1);
    }
}

<h2>Admin Dashboard</h2>
<p>Welcome, @Model.Username</p>


<div class="container">
    <div class="row">
        
        @foreach (var day in daysOfWeek)
        {
            <div class="col-md-2">
                <h4>@CultureInfo.CurrentCulture.TextInfo.ToTitleCase(day.ToString("dddd", new CultureInfo("sv-SE")).ToLower()) @day.ToString("dd-MM-yyyy")</h4>
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton@day.DayOfWeek" data-bs-toggle="dropdown" aria-expanded="false">
                        Välj tider
                    </button>
                    <div class="dropdown-menu p-3" aria-labelledby="dropdownMenuButton@day.DayOfWeek" style="min-width: 200px;">
                        
                        @for (var hour = 8; hour <= 16; hour++)
                        {
                            //format the time slot 
                            var timeSlot = $"{hour:00}:00 - {hour + 1:00}:00";
                            <div class="form-check">
                                <input class="form-check-input time-checkbox" type="checkbox"
                                       value="@timeSlot" id="timeSlot@day.DayOfWeek@hour data-day=@day.DayOfWeek" />
                                <label class="form-check-label" for="timeSlot@day.DayOfWeek@hour">
                                    @timeSlot
                                </label>
                            </div>
                        }
                    </div>
                </div>
            </div>
        }
    </div>
</div>

<button id="saveAvailability" class="btn btn-primary mt-3">Spara tillgänglighet</button>